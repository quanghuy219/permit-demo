<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Permit Demo</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.4-rc.1/web3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/8.0.2/bignumber.min.js"
        integrity="sha512-7UzDjRNKHpQnkh1Wf1l6i/OPINS9P2DDzTwQNX79JxfbInCXGpgI1RPb3ZD+uTP3O5X7Ke4e0+cxt2TxV7n0qQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.0.2/cleave.min.js"
        integrity="sha512-SvgzybymTn9KvnNGu0HxXiGoNeOi0TTK7viiG0EGn2Qbeu/NFi3JdWrJs2JHiGA1Lph+dxiDv5F9gDlcgBzjfA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"
        type="application/javascript"></script>
    <script src="script.js?v=2"></script>
</head>

<body>
    <div class="container mt-3">
        <input class="btn btn-primary" id="connect-btn" type="button" value="Connect Wallet" onclick="connect();" />
        <p id="wallet-address-txt"></p>
        <input class="btn btn-primary" type="button" value="Sign and Permit" onclick="signAndPermit();">
        <p id="permit-txhash"></p>

        <form id="swap-form" class="w-50">
            <div class="input-group mt-3 mb-3">
                <span class="input-group-text">
                    <select class="form-select" name="select-source-token" id="select-source-token"
                        onchange="onSourceTokenChange(this.value)">
                        <option selected value="USDC">USDC</option>
                        <option value="ETH">ETH</option>
                    </select>
                </span>
                <div class="form-floating">
                    <input type="text" name="source-token-amount" id="source-token-amount"
                        class="form-control number-input shadow-none" aria-describedby="btn-addon-max-input-amount">
                    <label id="source-token-balance-label" for="source-token-amount">Balance: </label>
                </div>
                <button type="button" id="btn-addon-max-input-amount" class="btn btn-outline-primary"
                    onclick="inputMaxAmount();">Max</button>
            </div>

            <div class="text-center">
                <button id="switch-btn" class="btn btn-outline-primary btn-sm text-center" type="button"
                    onclick="switchTokens();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                        class="bi bi-arrow-down-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5zm-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5z" />
                    </svg>
                </button>
            </div>

            <div class="input-group mt-3 mb-3">
                <span class="input-group-text">
                    <select class="form-select" name="select-dest-token" id="select-dest-token"
                        onchange="onDestTokenChange(this.value)">
                        <option selected value="ETH">ETH</option>
                        <option value="USDC">USDC</option>
                    </select>
                </span>
                <div class="form-floating">
                    <input type="number" name="dest-token-amount" id="dest-token-amount" class="form-control" disabled>
                    <label id="dest-token-balance-label" for="dest-token-amount">Balance: </label>
                </div>
            </div>

            <input id="swap-btn" class="btn btn-success" type="button" value="Permit and Swap" onclick="swap();">
        </form>
        <p><a id="swap-txhash" target="_blank" href="#" class="link-underline-primary"></a></p>
    </div>
</body>

</html>